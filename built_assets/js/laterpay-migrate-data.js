!function(t){t(function(){var i=jQuery("#lp_js_startDataMigration"),a=jQuery("#lp_js_startDataMigrationTwo"),e=jQuery("#lp_migration_notice");function s(i,a){var n={action:"laterpay_start_migration",security:migration_nonce,migrate:i,offset:a};t.post(ajaxurl,n,function(i){"string"===t.type(i)&&(i=JSON.parse(i)),"subscription_migrated"in i&&!0!==i.subscription_migrated?s("subscription",i.offset):"subscription_migrated"in i&&!0===i.subscription_migrated?(t("<span />").addClass("dashicons dashicons-yes").appendTo(e),t("<br />").appendTo(e),e.append(lp_i18n.MigratingTimepasses),s("time_pass",i.offset)):"time_pass_migrated"in i&&!0!==i.time_pass_migrated?s("time_pass",i.offset):"time_pass_migrated"in i&&!0===i.time_pass_migrated?(t("<span />").addClass("dashicons dashicons-yes").appendTo(e),t("<br />").appendTo(e),e.append(lp_i18n.MigratingCategoryPrices),s("category_price",i.offset)):"category_price_migrated"in i&&!0!==i.category_price_migrated?s("category_price",i.offset):"category_price_migrated"in i&&!0===i.category_price_migrated&&(t("<span />").addClass("dashicons dashicons-yes").appendTo(e),t("<br />").appendTo(e),t("<br />").appendTo(e),e.append(lp_i18n.MigrationCompleted),!0===i.cleanup&&(t("<br />").appendTo(e),e.append(lp_i18n.RemovedCustomTables),t("<span />").addClass("dashicons dashicons-yes").appendTo(e),t("<button/>").attr("type","button").addClass("notice-dismiss").appendTo(e),t("#migration-loader").remove(),e.removeClass("notice-info").addClass("notice-success"),t(".notice-dismiss").click(function(){e.remove()})))})}i.on("click",function(){e.removeClass("notice-error").addClass("notice-info"),e.html("").append(lp_i18n.MigratingData),t("<img />").attr("id","migration-loader").attr("src","/wp-admin/images/loading.gif").appendTo(e),t("<br />").appendTo(e),t("<br />").appendTo(e),e.append(lp_i18n.MigratingSubscriptions),s("subscription",0)}),a.on("click",function(){e.removeClass("notice-error").addClass("notice-info"),e.html("").append(lp_i18n.MigratingData),t("<img />").attr("id","migration-loader").attr("src","/wp-admin/images/loading.gif").appendTo(e),t("<br />").appendTo(e),t("<br />").appendTo(e),e.append(lp_i18n.MigratingSubscriptions),s("subscription",0)})})}(jQuery);